<div class="tw-relative tw-my-2">
  <div class="tw-max-w-7xl tw-mx-auto tw-px-4">
    <div class="tw-flex tw-justify-between tw-items-center tw-border-b-2 tw-border-gray-100 tw-py-6  md:tw-space-x-10">
      <a href="{{ routes.root_url }}" class="tw-no-underline tw-text-indigo-700">
        <span class="tw-sr-only">Top page</span>
        {%- if section.settings.logo != blank -%}
          <img class="tw-h-8 tw-w-auto sm:tw-h-10" srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x"
              src="{{ section.settings.logo | img_url: image_size }}"
              loading="lazy" alt="{{ section.settings.logo.alt | default: shop.name | escape }}"/>
        {%- else -%}
          <span>{{ shop.name }}</span>
        {%- endif -%}
      </a>

      {%- if section.settings.menu != blank -%}
        <nav>
          <ul class="tw-flex tw-space-x-10 tw-list-none">
            {%- for link in section.settings.menu.links -%}
              <li>
                {%- if childlink.links == blank -%}
                <a href="{{ link.url }}" class="tw-no-underline tw-text-base tw-font-medium tw-text-gray-500 hover:tw-text-gray-900">{{ link.title | escape }}</a>
                  {% comment %}
                    TODO: grand child process
                    https://tailwindui.com/components/marketing/elements/headers
                  {% endcomment %}
                {%- else -%}
                <span class="tw-no-underline tw-text-base tw-font-medium tw-text-gray-500 hover:tw-text-gray-900">{{ link.title | escape }}</span>
                {%- endif -%}
              </li>
            {%- endfor -%}
          </ul>
        </nav>
      {%- endif -%}

      <div>
        {%- if shop.customer_accounts_enabled -%}
          <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="tw-flex tw-items-center tw-justify-center tw-relative -tw-mr-5 tw-h-10 tw-w-10 tw-text-gray-500 hover:tw-text-gray-900">
            {% render 'icon-account' %}
            <span class="tw-sr-only">
              {%- liquid
                if customer
                  echo 'customer.account_fallback' | t
                else
                  echo 'customer.log_in' | t
                endif
              -%}
            </span>
          </a>
        {%- endif -%}

        <a href="{{ routes.cart_url }}" class="tw-flex tw-items-center tw-justify-center tw-relative -tw-mr-5 tw-h-10 tw-w-10 tw-text-gray-500 hover:tw-text-gray-900" id="cart-icon-bubble">
          {%- liquid
            if cart == empty
              render 'icon-cart-empty'
            else
              render 'icon-cart'
            endif
          -%}
          <span class="tw-sr-only">{{ 'templates.cart.cart' | t }}</span>
          {%- if cart != empty -%}
            <div class="cart-count-bubble">
              {%- if cart.item_count < 100 -%}
                <span aria-hidden="true">{{ cart.item_count }}</span>
              {%- endif -%}
              <span class="tw-sr-only">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
            </div>
          {%- endif -%}
        </a>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:sections.header.settings.logo.label"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    }
  ]
}
{% endschema %}